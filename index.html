<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <title>Resolución de Sistema de Ecuaciones</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light p-4">

    <div class="container">
        <h2 class="mb-4">🔢 Resolver Sistema de Ecuaciones Lineales</h2>

        <p>Ingresa los coeficientes del sistema de 3 ecuaciones con 3 incógnitas. Luego haz clic en "Resolver".</p>

        <form id="sistemaForm" class="table-responsive">
            <table class="table table-bordered text-center align-middle">
                <thead class="table-light">
                    <tr>
                        <th>A</th>
                        <th>B</th>
                        <th>C</th>
                        <th>Resultado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="number" class="form-control" value="2" id="a00"></td>
                        <td><input type="number" class="form-control" value="1" id="a01"></td>
                        <td><input type="number" class="form-control" value="3" id="a02"></td>
                        <td><input type="number" class="form-control" value="20" id="a03"></td>
                    </tr>
                    <tr>
                        <td><input type="number" class="form-control" value="1" id="a10"></td>
                        <td><input type="number" class="form-control" value="2" id="a11"></td>
                        <td><input type="number" class="form-control" value="1" id="a12"></td>
                        <td><input type="number" class="form-control" value="15" id="a13"></td>
                    </tr>
                    <tr>
                        <td><input type="number" class="form-control" value="1" id="a20"></td>
                        <td><input type="number" class="form-control" value="3" id="a21"></td>
                        <td><input type="number" class="form-control" value="2" id="a22"></td>
                        <td><input type="number" class="form-control" value="25" id="a23"></td>
                    </tr>
                </tbody>
            </table>

            <button type="button" class="btn btn-primary" onclick="resolverSistema()">Resolver</button>
        </form>

        <div id="resultado" class="mt-4"></div>
    </div>

    <script>
        function resolverSistema() {
            const A = [];

            // Leer los datos desde la tabla
            for (let i = 0; i < 3; i++) {
                const fila = [];
                for (let j = 0; j < 4; j++) {
                    const valor = parseFloat(document.getElementById(`a${i}${j}`).value);
                    fila.push(valor);
                }
                A.push(fila);
            }

            // Eliminación de Gauss
            const n = 3;
            for (let i = 0; i < n; i++) {
                // Pivoteo parcial
                let maxRow = i;
                for (let k = i + 1; k < n; k++) {
                    if (Math.abs(A[k][i]) > Math.abs(A[maxRow][i])) {
                        maxRow = k;
                    }
                }
                [A[i], A[maxRow]] = [A[maxRow], A[i]];

                // Eliminar debajo del pivote
                for (let k = i + 1; k < n; k++) {
                    let factor = A[k][i] / A[i][i];
                    for (let j = i; j <= n; j++) {
                        A[k][j] -= factor * A[i][j];
                    }
                }
            }

            // Sustitución regresiva
            const x = Array(n).fill(0);
            for (let i = n - 1; i >= 0; i--) {
                x[i] = A[i][n] / A[i][i];
                for (let k = i - 1; k >= 0; k--) {
                    A[k][n] -= A[k][i] * x[i];
                }
            }

            // Mostrar resultados
            const resultadoDiv = document.getElementById("resultado");
            resultadoDiv.innerHTML = `
        <h4>Resultado</h4>
        <table class="table table-bordered w-auto">
          <tr><th>A</th><td>${x[0].toFixed(2)}</td></tr>
          <tr><th>B</th><td>${x[1].toFixed(2)}</td></tr>
          <tr><th>C</th><td>${x[2].toFixed(2)}</td></tr>
        </table>
      `;
        }
    </script>

</body>

</html>